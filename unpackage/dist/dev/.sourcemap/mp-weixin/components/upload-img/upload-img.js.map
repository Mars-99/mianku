{"version":3,"sources":["webpack:///C:/Users/yori/Documents/HBuilderProjects/mianku/components/upload-img/upload-img.vue?f118","webpack:///C:/Users/yori/Documents/HBuilderProjects/mianku/components/upload-img/upload-img.vue?7376","webpack:///C:/Users/yori/Documents/HBuilderProjects/mianku/components/upload-img/upload-img.vue?d970","webpack:///C:/Users/yori/Documents/HBuilderProjects/mianku/components/upload-img/upload-img.vue?3f17","uni-app:///components/upload-img/upload-img.vue","webpack:///C:/Users/yori/Documents/HBuilderProjects/mianku/components/upload-img/upload-img.vue?cbc8"],"names":["renderjs","component","options","__file","components","uniIcons","e","message","indexOf","console","error","render","_vm","this","_h","$createElement","_self","_c","recyclableRender","staticRenderFns","_withStripped"],"mappings":"iIAAA,yHACIA,EADJ,QASIC,EAAY,qBACd,aACA,YACA,sBACA,EACA,KACA,WACA,MACA,EACA,gBACAD,GAGFC,EAAUC,QAAQC,OAAS,uCACZ,aAAAF,E,0CCvBf,uQ,iCCAA,IAAIG,EAAJ,0LACA,IACEA,EAAa,CACXC,SAAU,WACR,OAAO,yHAKX,MAAOC,GACP,IAC+C,IAA7CA,EAAEC,QAAQC,QAAQ,wBACa,IAA/BF,EAAEC,QAAQC,QAAQ,QAWlB,MAAMF,EATNG,QAAQC,MAAMJ,EAAEC,SAChBE,QAAQC,MAAM,mBACdD,QAAQC,MACN,uFAEFD,QAAQC,MACN,mDAMN,IAAIC,EAAS,WACX,IAAIC,EAAMC,KACNC,EAAKF,EAAIG,eACJH,EAAII,MAAMC,IAEjBC,GAAmB,EACnBC,EAAkB,GACtBR,EAAOS,eAAgB,G,iCCjCvB,8GAAkpB,eAAG,G,+HCgBrpB,QAIA,Q,sjEAGA,CACA,kBACA,OAEA,SACA,aACA,YAGA,WACA,aACA,YAGA,WACA,qBACA,WAGA,YACA,WACA,mBACA,2BAIA,UACA,qBACA,WAGA,MACA,WACA,mBACA,YAIA,KAtCA,WAuCA,OACA,WACA,YACA,uBAGA,OACA,KADA,SACA,GACA,cAEA,QAJA,SAIA,GACA,2BAGA,eACA,2DAEA,QAxDA,WAyDA,sBAEA,SACA,KADA,SACA,GACA,oBAIA,2BAHA,iBAMA,UATA,WASA,WAOA,eACA,mCACA,8BACA,oBACA,iJACA,kBACA,eACA,iBACA,UAJA,IAMA,GANA,gEAMA,EANA,kBAOA,kBAPA,UAOA,EAPA,OAQA,qBAEA,uBACA,UAXA,wBAYA,gBAZA,kBAaA,0BAbA,YAeA,UAfA,wBAgBA,gBAhBA,kBAiBA,oBAjBA,QAoBA,2BACA,aArBA,kJAuBA,gBACA,qCAxBA,4HA6BA,UAjDA,SAiDA,cACA,mBACA,aACA,WACA,kBACA,oBACA,YACA,cACA,yBACA,kBAMA,aAhEA,SAgEA,GACA,uBACA,gBACA,aACA,UAKA,UAzEA,WA0EA,sDAGA,SA7EA,WA8EA,mCACA,0BAEA,6B,2ECnKA,8GAAw8B,eAAG,G","file":"components/upload-img/upload-img.js","sourcesContent":["import { render, staticRenderFns, recyclableRender, components } from \"./upload-img.vue?vue&type=template&id=74d9d938&scoped=true&\"\nvar renderjs\nimport script from \"./upload-img.vue?vue&type=script&lang=js&\"\nexport * from \"./upload-img.vue?vue&type=script&lang=js&\"\nimport style0 from \"./upload-img.vue?vue&type=style&index=0&id=74d9d938&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!D:\\\\工作软件\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\runtime\\\\componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"74d9d938\",\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"components/upload-img/upload-img.vue\"\nexport default component.exports","export * from \"-!D:\\\\工作软件\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\templateLoader.js??vue-loader-options!D:\\\\工作软件\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--16-0!D:\\\\工作软件\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\template.js!D:\\\\工作软件\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-uni-app-loader\\\\page-meta.js!D:\\\\工作软件\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\工作软件\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./upload-img.vue?vue&type=template&id=74d9d938&scoped=true&\"","var components\ntry {\n  components = {\n    uniIcons: function() {\n      return import(\n        /* webpackChunkName: \"uni_modules/uni-icons/components/uni-icons/uni-icons\" */ \"@/uni_modules/uni-icons/components/uni-icons/uni-icons.vue\"\n      )\n    }\n  }\n} catch (e) {\n  if (\n    e.message.indexOf(\"Cannot find module\") !== -1 &&\n    e.message.indexOf(\".vue\") !== -1\n  ) {\n    console.error(e.message)\n    console.error(\"1. 排查组件名称拼写是否正确\")\n    console.error(\n      \"2. 排查组件是否符合 easycom 规范，文档：https://uniapp.dcloud.net.cn/collocation/pages?id=easycom\"\n    )\n    console.error(\n      \"3. 若组件不符合 easycom 规范，需手动引入，并在 components 中注册该组件\"\n    )\n  } else {\n    throw e\n  }\n}\nvar render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!D:\\\\工作软件\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\babel-loader\\\\lib\\\\index.js!D:\\\\工作软件\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--12-1!D:\\\\工作软件\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\script.js!D:\\\\工作软件\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\工作软件\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./upload-img.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!D:\\\\工作软件\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\babel-loader\\\\lib\\\\index.js!D:\\\\工作软件\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--12-1!D:\\\\工作软件\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\script.js!D:\\\\工作软件\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\工作软件\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./upload-img.vue?vue&type=script&lang=js&\"","<template>\r\n\t<view class=\"imglistbx\">\r\n\t\t<view :class=\"['imglist-item',columnNum == 3?'column3':'column4']\" v-for=\"(item,index) in showList\"\r\n\t\t\t:key='index'>\r\n\t\t\t<image :src=\"item\" class=\"item-img\" @click=\"previewImage(index)\" mode=\"aspectFill\"></image>\r\n\t\t\t<uni-icons class=\"cancel-btn\" type=\"closeempty\" size=\"18\" color=\"#d9d9d9\" @click=\"deleteImg(index)\"\r\n\t\t\t\tv-if=\"deleteBtn\"></uni-icons>\r\n\t\t</view>\r\n\t\t<!-- 上传控件 -->\r\n\t\t<view :class=\"['imglist-item',columnNum == 3?'column3':'column4']\" @click=\"uploadImg\" v-if=\"showUploadControl\">\r\n\t\t\t<view class=\"item-img uploadControl\">+</view>\r\n\t\t</view>\r\n\t</view>\r\n</template>\r\n\r\n<script>\r\n\timport {\r\n\t\tgetUpload\r\n\t} from '@/utils/request/manage.js'\r\n\r\n\timport {\r\n\t\tmapState\r\n\t} from 'vuex'\r\n\texport default {\r\n\t\tname: 'upload-img',\r\n\t\tprops: {\r\n\t\t\t//是否显示上传控件\r\n\t\t\tcontrol: {\r\n\t\t\t\ttype: Boolean,\r\n\t\t\t\tdefault: true\r\n\t\t\t},\r\n\t\t\t//是否显示上删除按钮\r\n\t\t\tdeleteBtn: {\r\n\t\t\t\ttype: Boolean,\r\n\t\t\t\tdefault: true\r\n\t\t\t},\r\n\t\t\t//行数量 \r\n\t\t\tcolumnNum: {\r\n\t\t\t\ttype: [Number, String],\r\n\t\t\t\tdefault: 3\r\n\t\t\t},\r\n\t\t\t//album 从相册选图，camera 使用相机\r\n\t\t\tsourceType: {\r\n\t\t\t\ttype: Array,\r\n\t\t\t\tdefault: function() {\r\n\t\t\t\t\treturn ['camera', 'album']\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\t//最大上传数量\r\n\t\t\tmaxCount: {\r\n\t\t\t\ttype: [Number, String],\r\n\t\t\t\tdefault: 9\r\n\t\t\t},\r\n\t\t\t//服务返回回调的图片数组--回填\r\n\t\t\tmode: {\r\n\t\t\t\ttype: Array,\r\n\t\t\t\tdefault: function() {\r\n\t\t\t\t\treturn []\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\t\tdata() {\r\n\t\t\treturn {\r\n\t\t\t\timgList: [], // 临时路径集合\r\n\t\t\t\tshowList: [], // 展示用路径集合\r\n\t\t\t\tshowUploadControl: true\r\n\t\t\t}\r\n\t\t},\r\n\t\twatch: {\r\n\t\t\tmode(v) {\r\n\t\t\t\tthis.init(v)\r\n\t\t\t},\r\n\t\t\tcontrol(v) {\r\n\t\t\t\tthis.showUploadControl = v\r\n\t\t\t},\r\n\t\t},\r\n\t\tcomputed: {\r\n\t\t\t...mapState(['getUserinfo', 'getNeedAuth', 'getIsLogin'])\r\n\t\t},\r\n\t\tcreated() {\r\n\t\t\tthis.init(this.mode)\r\n\t\t},\r\n\t\tmethods: {\r\n\t\t\tinit(v) {\r\n\t\t\t\tif (this.mode.length != 0) {\r\n\t\t\t\t\tthis.showList = v;\r\n\t\t\t\t\treturn\r\n\t\t\t\t};\r\n\t\t\t\tthis.showList = this.imgList;\r\n\t\t\t},\r\n\t\t\t// 上传图片\r\n\t\t\tuploadImg() {\r\n\t\t\t\t// let loginAuth = uni.getStorageSync('loginAuth')\r\n\t\t\t\t// if (!loginAuth) {\r\n\t\t\t\t// \tthis.$api.msg('请先登录')\r\n\t\t\t\t// \tthis.$api.href('../login/login')\r\n\t\t\t\t// \treturn\r\n\t\t\t\t// }\r\n\t\t\t\tuni.chooseImage({\r\n\t\t\t\t\tsizeType: ['original', 'compressed'], //可以指定是原图还是压缩图，默认二者都有\r\n\t\t\t\t\tsourceType: ['album', 'camera'], //从相册选择或拍摄\r\n\t\t\t\t\tcount: this.maxCount,\r\n\t\t\t\t\tsuccess: async (chooseImageRes) => {\r\n\t\t\t\t\t\tconst tempFilePaths = chooseImageRes.tempFilePaths;\r\n\t\t\t\t\t\tuni.showLoading({\r\n\t\t\t\t\t\t\ttitle: '正在上传中...',\r\n\t\t\t\t\t\t\tmask: true\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\tfor (let temp of tempFilePaths) {\r\n\t\t\t\t\t\t\tconst res1 = await getUpload(temp)\r\n\t\t\t\t\t\t\tlet res = JSON.parse(res1.data)\r\n\r\n\t\t\t\t\t\t\tconsole.log('res: ', res);\r\n\t\t\t\t\t\t\tif (res.code == 1) {\r\n\t\t\t\t\t\t\t\tuni.hideLoading()\r\n\t\t\t\t\t\t\t\treturn this.$api.msg('上传失败' + res.msg)\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tif (res.code == -1) {\r\n\t\t\t\t\t\t\t\tuni.hideLoading()\r\n\t\t\t\t\t\t\t\treturn this.$api.msg('请先登录')\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t// this.imgList.push(temp)\r\n\t\t\t\t\t\t\tthis.imgList.push(res.data.url)\r\n\t\t\t\t\t\t\tthis.isMaxNum();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tuni.hideLoading()\r\n\t\t\t\t\t\tthis.$emit(\"chooseFile\", this.imgList, tempFilePaths[0])\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\t//删除图片\r\n\t\t\tdeleteImg(eq) {\r\n\t\t\t\tlet getUrl = this.handleImg();\r\n\t\t\t\tuni.showModal({\r\n\t\t\t\t\ttitle: '提示',\r\n\t\t\t\t\tcontent: '您确定删除吗？',\r\n\t\t\t\t\tsuccess: (res) => {\r\n\t\t\t\t\t\tif (res.confirm) {\r\n\t\t\t\t\t\t\tgetUrl.splice(eq, 1);\r\n\t\t\t\t\t\t\tthis.$emit(\"imgDelete\", getUrl, eq);\r\n\t\t\t\t\t\t\tthis.isMaxNum();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\t// 预览图片\r\n\t\t\tpreviewImage(eq) {\r\n\t\t\t\tlet getUrl = this.handleImg();\r\n\t\t\t\tuni.previewImage({\r\n\t\t\t\t\tcurrent: getUrl[eq],\r\n\t\t\t\t\turls: getUrl\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\t//返回需要操作的图片数组\r\n\t\t\t//如果是回调了则操作回填后的数组 否则操作临时路径的图片数组\r\n\t\t\thandleImg() {\r\n\t\t\t\treturn this.mode.length > 0 ? this.showList : this.imgList\r\n\t\t\t},\r\n\t\t\t//判断图片数量是否已经到最大数量\r\n\t\t\tisMaxNum() {\r\n\t\t\t\tif (this.imgList.length >= this.maxCount) {\r\n\t\t\t\t\tthis.showUploadControl = false\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.showUploadControl = true\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n</script>\r\n\r\n<style scoped>\r\n\t/* 上传  str */\r\n\t.imglistbx {\r\n\t\twidth: 100%;\r\n\t\theight: 100%;\r\n\t\t/* padding: 0 20rpx; */\r\n\t\tdisplay: flex;\r\n\t\tflex-wrap: wrap;\r\n\t}\r\n\r\n\t.imglistbx:after {\r\n\t\tcontent: \"\";\r\n\t\theight: 0;\r\n\t\twidth: 160rpx;\r\n\t}\r\n\r\n\t.imglist-item {\r\n\t\tposition: relative;\r\n\t\toverflow: hidden;\r\n\t\tborder-radius: 8rpx;\r\n\t\tmargin-bottom: 10rpx;\r\n\t}\r\n\r\n\t.column3 {\r\n\t\twidth: 160rpx;\r\n\t\theight: 160rpx;\r\n\t}\r\n\r\n\t.column4 {\r\n\t\twidth: 25%;\r\n\t\theight: 160rpx;\r\n\t}\r\n\r\n\t.item-img {\r\n\t\twidth: 100%;\r\n\t\theight: 100%;\r\n\t\tborder-radius: 8rpx;\r\n\t}\r\n\r\n\t.cancel-btn {\r\n\t\tposition: absolute;\r\n\t\ttop: 8rpx;\r\n\t\tright: 8rpx;\r\n\t\twidth: 44rpx;\r\n\t\theight: 44rpx;\r\n\t\t/* background: url(~@/static/icons/sc-uploadimg.png) no-repeat; */\r\n\t\tbackground-size: cover;\r\n\t}\r\n\r\n\t/* 上传控件 */\r\n\t.uploadControl {\r\n\t\tfont-size: 50rpx;\r\n\t\tcolor: #888;\r\n\t\tbackground-color: #F6F7FB;\r\n\t\tdisplay: flex;\r\n\t\tjustify-content: center;\r\n\t\talign-items: center;\r\n\t}\r\n</style>\n","import mod from \"-!D:\\\\工作软件\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\mini-css-extract-plugin\\\\dist\\\\loader.js??ref--6-oneOf-1-0!D:\\\\工作软件\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\css-loader\\\\dist\\\\cjs.js??ref--6-oneOf-1-1!D:\\\\工作软件\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\stylePostLoader.js!D:\\\\工作软件\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--6-oneOf-1-2!D:\\\\工作软件\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\postcss-loader\\\\src\\\\index.js??ref--6-oneOf-1-3!D:\\\\工作软件\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\工作软件\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./upload-img.vue?vue&type=style&index=0&id=74d9d938&scoped=true&lang=css&\"; export default mod; export * from \"-!D:\\\\工作软件\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\mini-css-extract-plugin\\\\dist\\\\loader.js??ref--6-oneOf-1-0!D:\\\\工作软件\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\css-loader\\\\dist\\\\cjs.js??ref--6-oneOf-1-1!D:\\\\工作软件\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\stylePostLoader.js!D:\\\\工作软件\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--6-oneOf-1-2!D:\\\\工作软件\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\postcss-loader\\\\src\\\\index.js??ref--6-oneOf-1-3!D:\\\\工作软件\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\工作软件\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./upload-img.vue?vue&type=style&index=0&id=74d9d938&scoped=true&lang=css&\""],"sourceRoot":""}