(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/student-privilege/authenticate"],{410:function(e,n,t){"use strict";(function(e){t(5);r(t(3));var n=r(t(411));function r(e){return e&&e.__esModule?e:{default:e}}wx.__webpack_require_UNI_MP_PLUGIN__=t,e(n.default)}).call(this,t(1)["createPage"])},411:function(e,n,t){"use strict";t.r(n);var r=t(412),o=t(414);for(var i in o)"default"!==i&&function(e){t.d(n,e,(function(){return o[e]}))}(i);t(416);var a,u=t(11),s=Object(u["default"])(o["default"],r["render"],r["staticRenderFns"],!1,null,"ba1bcd04",null,!1,r["components"],a);s.options.__file="pages/student-privilege/authenticate.vue",n["default"]=s.exports},412:function(e,n,t){"use strict";t.r(n);var r=t(413);t.d(n,"render",(function(){return r["render"]})),t.d(n,"staticRenderFns",(function(){return r["staticRenderFns"]})),t.d(n,"recyclableRender",(function(){return r["recyclableRender"]})),t.d(n,"components",(function(){return r["components"]}))},413:function(e,n,t){"use strict";var r;t.r(n),t.d(n,"render",(function(){return o})),t.d(n,"staticRenderFns",(function(){return a})),t.d(n,"recyclableRender",(function(){return i})),t.d(n,"components",(function(){return r}));try{r={uniSegmentedControl:function(){return t.e("uni_modules/uni-segmented-control/components/uni-segmented-control/uni-segmented-control").then(t.bind(null,492))},uniForms:function(){return Promise.all([t.e("common/vendor"),t.e("uni_modules/uni-forms/components/uni-forms/uni-forms")]).then(t.bind(null,562))},uniFormsItem:function(){return t.e("uni_modules/uni-forms/components/uni-forms-item/uni-forms-item").then(t.bind(null,570))},uniEasyinput:function(){return t.e("uni_modules/uni-easyinput/components/uni-easyinput/uni-easyinput").then(t.bind(null,477))},uniDataPicker:function(){return Promise.all([t.e("common/vendor"),t.e("uni_modules/uni-data-picker/components/uni-data-picker/uni-data-picker")]).then(t.bind(null,577))},uploadImg:function(){return Promise.all([t.e("common/vendor"),t.e("components/upload-img/upload-img")]).then(t.bind(null,587))}}}catch(u){if(-1===u.message.indexOf("Cannot find module")||-1===u.message.indexOf(".vue"))throw u;console.error(u.message),console.error("1. 排查组件名称拼写是否正确"),console.error("2. 排查组件是否符合 easycom 规范，文档：https://uniapp.dcloud.net.cn/collocation/pages?id=easycom"),console.error("3. 若组件不符合 easycom 规范，需手动引入，并在 components 中注册该组件")}var o=function(){var e=this,n=e.$createElement;e._self._c},i=!1,a=[];o._withStripped=!0},414:function(e,n,t){"use strict";t.r(n);var r=t(415),o=t.n(r);for(var i in r)"default"!==i&&function(e){t.d(n,e,(function(){return r[e]}))}(i);n["default"]=o.a},415:function(e,n,t){"use strict";(function(e){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r=i(t(19)),o=t(14);function i(e){return e&&e.__esModule?e:{default:e}}function a(e,n,t,r,o,i,a){try{var u=e[i](a),s=u.value}catch(c){return void t(c)}u.done?n(s):Promise.resolve(s).then(r,o)}function u(e){return function(){var n=this,t=arguments;return new Promise((function(r,o){var i=e.apply(n,t);function u(e){a(i,r,o,u,s,"next",e)}function s(e){a(i,r,o,u,s,"throw",e)}u(void 0)}))}}var s={data:function(){return{items:["在校生","应届高考生"],current:0,formData:{name:"",idCardNumber:""},rules:{name:{rules:[{required:!0,errorMessage:"请输入姓名"},{minLength:1,errorMessage:"不能为空"}]},idCardNumber:{rules:[{required:!0,errorMessage:"请输入身份证号"},{minLength:1,errorMessage:"不能为空"}]}},imageValue:[],years:[{name:"请选择入学年份"},{name:"2021"},{name:"2020"},{name:"2019"},{name:"2018"}],yearsIndex:0,education:[{name:"请选择学历"},{name:"大专"},{name:"本科"},{name:"硕士"},{name:"博士"}],educationIndex:0,school:"0-0",dataTree:[],universitData:[],parameter:{frontView:"",realName:"",school:"",education:"",enrollmentYear:""},licenseUrl:[],isChoose:!1}},onLoad:function(){this.universit()},methods:{universit:function(){var e=this;return u(r.default.mark((function n(){var t,i;return r.default.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,(0,o.getUniversit)();case 2:if(t=n.sent,i=t.data,1!=i.code){n.next=8;break}return n.abrupt("return",e.$api.msg(i.msg));case 8:(function(){e.universitData=i.data;var n=0,t=function(t){n++;var r=[];e.universitData[t].forEach((function(e,t){r.push({text:e.schoolName,value:"".concat(n,"-").concat(t+1)})})),r.sort((function(e,n){return e.text.localeCompare(n.text,"zh")}));var o={text:t,value:"".concat(n,"-0"),children:r};e.dataTree.push(o)};for(var r in e.universitData)t(r);e.dataTree.sort((function(e,n){return e.text.localeCompare(n.text,"zh")}))})();case 9:console.log("universit",e.dataTree);case 10:case"end":return n.stop()}}),n)})))()},getAuthenticationUpdateUrl:function(){var n=this;return u(r.default.mark((function t(){var i,a;return r.default.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,(0,o.authenticationUpdateUrl)(n.formData.idCardNumber,n.parameter.frontView,n.formData.name,n.parameter.school,n.parameter.education,n.parameter.enrollmentYear);case 2:if(i=t.sent,a=i.data,1!=a.code){t.next=8;break}return t.abrupt("return",n.$api.msg(a.msg));case 8:e.showToast({icon:"none",title:"认证已提交，1-3个工作日完成认证审核",duration:3e3,position:"top"}),e.navigateBack({success:function(){beforePage.onShow()}});case 10:case"end":return t.stop()}}),t)})))()},submit:function(){var n=this;this.isChoose?this.$refs.form.validate().then((function(e){console.log("表单数据信息：",e),n.getAuthenticationUpdateUrl()})).catch((function(e){console.log("表单错误信息：",e)})):e.showToast({icon:"none",title:"请阅读并同意学生认证协议才可以完成认证流程",duration:3e3,position:"top"})},onClickItem:function(e){this.formData.name="",this.formData.idCardNumber="",this.licenseUrl="",this.yearsIndex=0,this.educationIndex=0,this.school="0-0",this.current!==e.currentIndex&&(this.current=e.currentIndex)},Listeningfocus:function(){console.log(this.formData.idCardNumber),""!=this.formData.idCardNumber&&this.getCardTypeNumber(this.formData.idCardNumber)},getCardTypeNumber:function(n){var t=/^[1-9]\d{5}(18|19|20|(3\d))\d{2}((0[1-9])|(1[0-2]))(([0-2][1-9])|10|20|30|31)\d{3}[0-9Xx]$/;!1===t.test(n)&&n?e.showToast({icon:"none",title:"请输入正确格式的身份证号码",duration:2e3,position:"top"}):console.log("身份证号码格式正确")},yearsChange:function(e){this.yearsIndex=e.detail.value,this.parameter.enrollmentYear=this.years[e.detail.value].name,console.log("this.parameter.enrollmentYear",this.parameter.enrollmentYear)},educationChange:function(e){this.educationIndex=e.detail.value,this.parameter.education=this.education[e.detail.value].name,console.log("this.parameter.education",this.parameter.education)},schoolChange:function(e){var n=e.detail.value;this.parameter.school=n[1].text},chooseFile:function(e,n){this.licenseUrl=e.join(","),this.parameter.frontView=this.licenseUrl,console.log("this.licenseUrl1111",this.licenseUrl)},imgDelete:function(e,n){this.licenseUrl=e.join(","),console.log("this.licenseUrl2222",this.licenseUrl)},onnodeclick:function(e){},checkboxChange:function(e){this.isChoose=0==e.detail.value[0]},openSiteContent:function(){e.navigateTo({url:"../site-content/site-content?id=8"})}}};n.default=s}).call(this,t(1)["default"])},416:function(e,n,t){"use strict";t.r(n);var r=t(417),o=t.n(r);for(var i in r)"default"!==i&&function(e){t.d(n,e,(function(){return r[e]}))}(i);n["default"]=o.a},417:function(e,n,t){}},[[410,"common/runtime","common/vendor"]]]);
//# sourceMappingURL=../../../.sourcemap/mp-weixin/pages/student-privilege/authenticate.js.map